<div class="page-container register-wuwa-background">
  <!-- Fondo estrellado -->
  <div class="stars"></div>
  <div class="stars2"></div>
  <div class="stars3"></div>

  <!-- Controles de audio -->
  <div class="audio-controls">
    <button class="music-toggle" (click)="toggleMusic()">
      {{ isPlaying ? '游댉' : '游댆' }}
    </button>
    <button class="music-toggle" (click)="nextTrack()">游꿧</button>
    <div class="volume-control">
      <input
        type="range"
        min="0"
        max="1"
        step="0.01"
        [(ngModel)]="volume"
        (input)="adjustVolume()"
      />
    </div>
  </div>

  <div class="navigation-buttons">
    <button class="go-back-btn" (click)="goBack()">拘勇 Atr치s</button>
    <button class="go-forward-btn" (click)="goForward()">俱뫮잺 Adelante</button>
  </div>

  <!-- Formulario de registro -->
  <div class="register-container">
    <h2>Registrarse</h2>
    <form #registerForm="ngForm" (ngSubmit)="register(registerForm)" novalidate>
      <!-- Nombre -->
      <label for="name">Nombre de Usuario:</label>
      <input
        type="text"
        id="name"
        [(ngModel)]="name"
        name="name"
        required
        autocomplete="off"
      />
      <div *ngIf="registerForm.submitted && registerForm.controls.name?.invalid" style="color: red; font-size: 0.9rem;">
        丘멆잺 El nombre es obligatorio.
      </div>

      <!-- Correo -->
      <label for="email">Correo electr칩nico:</label>
      <input
        type="email"
        id="email"
        [(ngModel)]="email"
        name="email"
        required
        pattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$"
        title="Por favor, introduce un correo electr칩nico v치lido"
        autocomplete="off"
      />
      <div *ngIf="registerForm.submitted && registerForm.controls.email?.invalid" style="color: red; font-size: 0.9rem;">
        <span *ngIf="registerForm.controls.email?.errors?.['required']">丘멆잺 El correo es obligatorio.</span>
        <span *ngIf="registerForm.controls.email?.errors?.['pattern']">丘멆잺 El formato del correo no es v치lido.</span>
      </div>

      <!-- Contrase침a -->
      <label for="password">Contrase침a:</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="password"
        required
        (input)="checkPasswordStrength()"
        autocomplete="off"
      />

      <!-- Barra de seguridad y mensaje -->
      <ng-container *ngIf="password">
        <div class="password-strength-container">
          <div class="strength-bar">
            <div
              class="strength-fill"
              [ngStyle]="{
                width: passwordStrength + '%',
                backgroundColor: passwordStrengthColor
              }"
            ></div>
          </div>
          <div
            class="strength-text"
            [ngStyle]="{ color: passwordStrengthColor }"
          >
            {{ passwordStrengthMessage }}
          </div>
        </div>

        <!-- Advertencia solo si la contrase침a no es fuerte -->
        <div *ngIf="!isPasswordStrong" style="color: red; font-size: 0.9rem; margin-bottom: 10px;">
          丘멆잺 La contrase침a debe tener al menos 8 caracteres, una may칰scula, una min칰scula, un n칰mero y un s칤mbolo.
        </div>
      </ng-container>

      <!-- Bot칩n registrar -->
      <button
        type="submit"
        class="register-button"
        [disabled]="!registerForm.valid || !isPasswordStrong"
      >
        Registrarse
      </button>
    </form>

    <p>쯏a tienes una cuenta?</p>
    <button (click)="goToLogin()" class="login-button">Iniciar Sesi칩n</button>
  </div>
</div>
