<div class="background-image"></div>
<div class="starfield"></div>

<!-- Perfil de usuario con dropdown -->
<div class="user-profile" (click)="toggleProfileDropdown()" tabindex="0">
  <img [src]="user.photoUrl" alt="Foto de perfil" class="profile-img" />
  <div class="dropdown" *ngIf="showDropdown" (click)="$event.stopPropagation()">
    <p class="user-name">{{ user.name }}</p>
    <p>{{ user.email }}</p>
    <hr />

    <!-- BotÃ³n para cambiar imagen -->
    <button (click)="togglePhotoSelector()">Cambiar imagen</button>

    <!-- Selector de personajes -->
    <div *ngIf="showPhotoSelector" class="selector-fotos">
      <p style="margin-top: 10px;">Elige una imagen:</p>
      <div class="lista-personajes" (wheel)="onCharacterListWheel($event)">
        <img *ngFor="let character of characters"
             [src]="character.profile_image_url"
             class="miniatura-vertical"
             (click)="setAsProfileImage(character.id)"
             [title]="character.name">
      </div>
    </div>

    <button (click)="logout()">Cerrar sesiÃ³n</button>
  </div>
</div>

<!-- BotÃ³n para controlar mÃºsica -->
<div class="audio-controls">
  <button class="music-toggle" (click)="toggleMusic()">
    {{ isPlaying ? 'ğŸ”Š' : 'ğŸ”‡' }}
  </button>
  <div class="volume-control">
    <input type="range" min="0" max="1" step="0.01" [(ngModel)]="volume" (input)="adjustVolume()" />
  </div>
</div>

<div class="home-container">
  <h1 class="title">Bienvenido, {{ user.name }}</h1>

  <div class="button-grid">
    <button class="starrail-btn" (click)="navigateTo('diarias')" (mouseenter)="playHover()" (click)="playClick()">Tareas Diarias</button>
    <button class="starrail-btn" (click)="navigateTo('tasks')" (mouseenter)="playHover()" (click)="playClick()">Tareas Generales</button>
    <button class="starrail-btn" (click)="navigateTo('glosario')" (mouseenter)="playHover()" (click)="playClick()">Glosario</button>
  </div>
</div>
